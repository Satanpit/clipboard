!function(t,e){"use strict";function r(t,e,r){return[].slice.call(t,e,r)}function n(t,e){var n=[];return e=e||document,Array.isArray(t)?t:t instanceof HTMLElement?[t]:(t instanceof HTMLCollection&&(n=t),"string"==typeof t&&(n=e.querySelectorAll(t)),r(n.length?n:t))}function i(t,e){return Object.getOwnPropertyNames(t).reduce(function(r,n){return r[n]=Object.getOwnPropertyDescriptor(t,n),r[n].enumerable=e||!1,r},{})}function o(t,e){return e||(e=t,t={}),Object.defineProperties(t,i(e))}var s,c={baseDriver:"native",alternativeDriver:"flash"},a=["checkSupport","copy","destroy"],u=o({constructor:function(){},channels:{},on:function(t,e,r){return this.channels[t]||(this.channels[t]=[]),this.channels[t].push({context:r||null,handler:e}),this},one:function(t,e,r){var n=function(){u.off(t,n),e.apply(r,arguments)};return this.on(t,n)},off:function(t,e){return 0===arguments.length?(this.channels.length=0,this):this.channels[t]?(e&&"function"==typeof e?this.channels[t].forEach(function(r,n){r.handler===e&&this.channels[t].splice(n,1)}.bind(this)):delete this.channels[t],this):this},trigger:function(t,e){if(!this.channels[t])return this;var n=r(arguments,2);return s&&window.clearTimeout(s),s=window.setTimeout(function(){n.unshift(new h(t,e)),this.channels[t].forEach(function(t){t.handler.apply(t.context,n)})}.bind(this),100),this}}),h=function(t,e){e=e||{};var r={type:t,target:e.target||null,clipboardType:e.clipboardType||this.clipboardType,timeStamp:this.timeStamp};switch(t){case"copy":r.text=e.text||null;break;case"error":r.message=e.message||null,r.name=e.name||null}o(this,r)};o(h.prototype,{get timeStamp(){return Date.now()},get clipboardType(){return f.using}});var p=Object.create(u,i({constructor:function(){},callbackToString:function(t,e){return"function"==typeof t?t(new h("copy",{target:e})):"object"==typeof t?JSON.stringify(t):""+t}})),f=function(t,e){this.name=t,e=Object.create(p,i(e,!0));try{var r=e;a.forEach(function(t){if(!e.hasOwnProperty(t))throw Error("Method "+t+" is not defined")}),Object.keys(e).forEach(function(t){t in this&&(this[t]="function"==typeof e[t]?e[t].bind(r):e[t])},this),f.register(this)}catch(n){e.trigger("error",{target:e,name:"driver-error",message:n})}};o(f,{drivers:{},using:void 0,get current(){return this.drivers[this.using]},use:function(t){return this.has(t)&&(this.using=t),this},has:function(t){return Boolean(this.drivers[t])},get:function(t){return this.has(t)?this.drivers[t]:void 0},register:function(t){if(!(t instanceof f))throw Error("Driver instance is not ClipboardDriver");if(this.has(t.name))throw Error('Driver "'+t.name+'" already exists');return t.config&&Object.keys(t.config).forEach(function(e){c[e]=t.config[e]}),this.drivers[t.name]=t,this},remove:function(t){return this.has(t)&&(this.get(t).destroy(),delete this.drivers[t]),this}}),o(f.prototype,{set name(t){if("string"!=typeof t)throw Error("name is not a string");Object.defineProperty(this,"name",{value:t})},set type(t){if("string"!=typeof t)throw Error("type is not a string");Object.defineProperty(this,"type",{value:t})},set checkSupport(t){if("function"!=typeof t)throw Error("checkSupport method is not a function");Object.defineProperty(this,"checkSupport",{value:t})},set copy(t){if("function"!=typeof t)throw Error("copy method is not a function");Object.defineProperty(this,"copy",{value:t})},set destroy(t){if("function"!=typeof t)throw Error("destroy method is not a function");Object.defineProperty(this,"destroy",{value:t})},set config(t){if("object"!=typeof t)throw Error("config is not a object");Object.defineProperty(this,"config",{value:t})}}),new f("native",{isSupport:void 0,events:[],textArea:void 0,get copyElement(){return this.textArea instanceof HTMLTextAreaElement?this.textArea:(this.textArea=e.createElement("textarea"),this.textArea.style.position="absolute",this.textArea.style.left="-10000px",(e.body||e.documentElement).appendChild(this.textArea))},checkSupport:function(){return void 0===this.isSupport?this.isSupport=e.queryCommandSupported("copy"):this.isSupport},copy:function(t,r){var n=function(t){t.preventDefault();var n=this.callbackToString(r,t.target);this.copyElement.value=n,this.copyElement.select();try{e.execCommand("copy"),this.trigger("copy",{target:t.currentTarget,text:n})}catch(i){this.isSupport=!1}void 0===this.isSupport&&(this.checkSupport(),this.isSupport&&f.remove("flash")),this.isSupport?f.use("native"):this.trigger("error",{clipboardType:"native",target:t.currentTarget,message:"Native clipboard not supported",name:"support"})}.bind(this);return t.forEach(function(t){t.addEventListener("mousedown",n,!1),this.events.push({elem:t,handler:n})},this),this},destroy:function(){(e.body||e.documentElement).removeChild(this.copyElement),this.events.forEach(function(t){t.elem.removeEventListener("mousedown",t.handler,!1)}),this.events.length=0}}),new f("flash",{config:{ZeroClipboard:window.ZeroClipboard||null},checkSupport:function(){return this.config.ZeroClipboard?!this.config.ZeroClipboard.isFlashUnusable():!1},copy:function(t,e){var r,n=new c.ZeroClipboard(t);n.on("copy",function(t){r=this.callbackToString(e,t.target),t.clipboardData.setData("text/plain",r),this.trigger("copy",{clipboardType:"flash",target:t.target,text:r})}.bind(this)),n.on("error",function(t){this.trigger("error",{clipboardType:"flash",callback:e,message:t.message,name:t.name})}.bind(this))},destroy:function(){this.config.ZeroClipboard.destroy()}});var l={copy:function(t,e){if(!t||!e)throw new Error("Invalid arguments");var i=r(arguments);if(i.splice(0,1,n(t)),void 0===f.using){if(f.use(c.baseDriver),f.current.copy.apply(f.current,i),c.alternativeDriver&&f.has(c.alternativeDriver)){var o=f.get(c.alternativeDriver);o.checkSupport()?o.copy.apply(o,i):f.remove(o.name)}}else f.current.copy.apply(f.current,i);return this.on("error",function(t){"support"===t.name&&(f.remove(t.clipboardType),Object.keys(f.drivers).forEach(function(e){var r=f.drivers[e];return r.checkSupport()?(r.copy.apply(r,i),f.use(r.name),t.target.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0})),!1):void 0}))},this),this},config:function(t){return Object.keys(t||{}).forEach(function(e){c[e]=t[e]}),this},Driver:f,destroy:function(){this.trigger("destroy"),Object.keys(f.drivers).forEach(function(t){var e=f.get(t);e.destroy()}),this.off()}};t.Clipboard=Object.create(u,i(l))}(window,document);
//# sourceMappingURL=clipboard.min.js.map